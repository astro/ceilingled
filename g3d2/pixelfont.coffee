FONT = [
        new Buffer [0x00,0x00,0x00] # ' '
        new Buffer [0x00,0x1D,0x00] # '!'
        new Buffer [0x18,0x00,0x18] # '"'
        new Buffer [0x1F,0x0A,0x1F] # '#'
        new Buffer [0x0A,0x1F,0x14] # '$'
        new Buffer [0x13,0x04,0x19] # '%'
        new Buffer [0x0A,0x15,0x0B] # '&'
        new Buffer [0x00,0x18,0x00] # '''
        new Buffer [0x00,0x0E,0x11] # ' '
        new Buffer [0x11,0x0E,0x00] # ')'
        new Buffer [0x15,0x0E,0x15] # '*'
        new Buffer [0x04,0x0E,0x04] # '+'
        new Buffer [0x01,0x02,0x00] # ','
        new Buffer [0x04,0x04,0x04] # '-'
        new Buffer [0x00,0x03,0x00] # '.'
        new Buffer [0x01,0x0E,0x10] # '/'
        new Buffer [0x1F,0x11,0x1F] # '0'
        new Buffer [0x09,0x1F,0x01] # '1'
        new Buffer [0x17,0x15,0x1D] # '2'
        new Buffer [0x11,0x15,0x1F] # '3'
        new Buffer [0x1C,0x04,0x1F] # '4'
        new Buffer [0x1D,0x15,0x17] # '5'
        new Buffer [0x1F,0x15,0x17] # '6'
        new Buffer [0x10,0x10,0x1F] # '7'
        new Buffer [0x1F,0x15,0x1F] # '8'
        new Buffer [0x1D,0x15,0x1F] # '9'
        new Buffer [0x00,0x0A,0x00] # ':'
        new Buffer [0x01,0x0A,0x00] # ';'
        new Buffer [0x04,0x0A,0x11] # '<'
        new Buffer [0x0A,0x0A,0x0A] # '='
        new Buffer [0x11,0x0A,0x04] # '>'
        new Buffer [0x10,0x15,0x18] # '?'
        new Buffer [0x0E,0x15,0x0D] # '@'
        new Buffer [0x0F,0x14,0x0F] # 'A'
        new Buffer [0x1F,0x15,0x0A] # 'B'
        new Buffer [0x0E,0x11,0x11] # 'C'
        new Buffer [0x1F,0x11,0x0E] # 'D'
        new Buffer [0x1F,0x15,0x15] # 'E'
        new Buffer [0x1F,0x14,0x14] # 'F'
        new Buffer [0x0E,0x15,0x17] # 'G'
        new Buffer [0x1F,0x04,0x1F] # 'H'
        new Buffer [0x11,0x1F,0x11] # 'I'
        new Buffer [0x02,0x01,0x1E] # 'J'
        new Buffer [0x1F,0x04,0x1B] # 'K'
        new Buffer [0x1F,0x01,0x01] # 'L'
        new Buffer [0x1F,0x08,0x1F] # 'M'
        new Buffer [0x1F,0x0E,0x1F] # 'N'
        new Buffer [0x0E,0x11,0x0E] # 'O'
        new Buffer [0x1F,0x14,0x08] # 'P'
        new Buffer [0x0E,0x13,0x0F] # 'Q'
        new Buffer [0x1F,0x16,0x0D] # 'R'
        new Buffer [0x09,0x15,0x12] # 'S'
        new Buffer [0x10,0x1F,0x10] # 'T'
        new Buffer [0x1E,0x01,0x1F] # 'U'
        new Buffer [0x1e,0x01,0x1e] # 'V'
        new Buffer [0x1F,0x06,0x1F] # 'W'
        new Buffer [0x1B,0x04,0x1B] # 'X'
        new Buffer [0x18,0x07,0x18] # 'Y'
        new Buffer [0x13,0x15,0x19] # 'Z'
        new Buffer [0x1F,0x11,0x00] # '['
        new Buffer [0x18,0x04,0x03] # '\'
        new Buffer [0x00,0x11,0x1F] # ']'
        new Buffer [0x08,0x10,0x08] # '^'
        new Buffer [0x01,0x01,0x01] # '_'
        new Buffer [0x10,0x08,0x00] # '`'
        new Buffer [0x03,0x05,0x07] # 'a'
        new Buffer [0x1F,0x05,0x02] # 'b'
        new Buffer [0x02,0x05,0x05] # 'c'
        new Buffer [0x02,0x05,0x1F] # 'd'
        new Buffer [0x06,0x0B,0x0D] # 'e'
        new Buffer [0x04,0x0F,0x14] # 'f'
        new Buffer [0x05,0x0D,0x0E] # 'g'
        new Buffer [0x1F,0x04,0x03] # 'h'
        new Buffer [0x00,0x17,0x00] # 'i'
        new Buffer [0x01,0x01,0x16] # 'j'
        new Buffer [0x0F,0x02,0x05] # 'k'
        new Buffer [0x11,0x1F,0x01] # 'l'
        new Buffer [0x07,0x06,0x07] # 'm'
        new Buffer [0x07,0x04,0x03] # 'n'
        new Buffer [0x02,0x05,0x02] # 'o'
        new Buffer [0x07,0x0A,0x04] # 'p'
        new Buffer [0x04,0x0A,0x07] # 'q'
        new Buffer [0x0F,0x04,0x04] # 'r'
        new Buffer [0x05,0x0F,0x0A] # 's'
        new Buffer [0x08,0x1F,0x08] # 't'
        new Buffer [0x06,0x01,0x07] # 'u'
        new Buffer [0x06,0x03,0x06] # 'v'
        new Buffer [0x07,0x03,0x07] # 'w'
        new Buffer [0x05,0x02,0x05] # 'x'
        new Buffer [0x09,0x05,0x0E] # 'y'
        new Buffer [0x0B,0x0F,0x0D] # 'z'
        new Buffer [0x04,0x1B,0x11] # '['
        new Buffer [0x00,0x1F,0x00] # '|'
        new Buffer [0x11,0x1B,0x04] # ']'
        new Buffer [0x08,0x18,0x10] # '~'
]

exports.putChar = (ctx, c) ->
    c -= 32
    cols = FONT[c]
    unless cols
        return

    for x in [0..2]
        for y in [0..5]
            if (cols[x] >> (5 - y)) & 1 is 1
                ctx.fillRect x, y, 1, 1

exports.putText = (ctx, x, y, s) ->
    ctx.save()

    ctx.translate x, y
    for i in [0..s.length-1]
        exports.putChar ctx, s.charCodeAt(i)
        ctx.translate 4, 0

    ctx.restore()

exports.textWidth = (s) ->
    s.length * 4 - 1
